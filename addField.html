<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Add a new Field</title>
    <script src="config.js"></script>        
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>  
</head>
<body>
    <form>
        Field Id:<br>
        <input type="text" name="fieldId" id="fieldId"required><br>
        Name of Field: (optional)<br>
        <input type="text" name="name" id="name"><br>
        Farm Id:<br>
        <input type="text" name="farmId" id="farmId" required><br>
        Acres: (optional) <br>
        <input type="text" name="acres" id="acres"><br>
        Latitude: (decimal number)<br>
        <input type="text" name="latitude" id="latitude" required><br>
        Longitude: (decimal number)<br>
        <input type="text" name="longitude" id="longitude" required><br>
        <input type="Submit" value="Submit" >
    </form>
</body>

<script>
    const uri = '/v2/fields'     
    var formData = 
        {
            "fieldId": $('#fieldId'),
            "name": $('#name'),
            "farmId": $('farmId'),
            "acres": $('acres'),
            "centerPoint": {
                "latitude": $('latitude'),
                "longitude": $('longitude')
            }
        }
    $("form").on("submit", function(e) {
        e.preventDefault()
        $.ajax({
            url: host + uri,
            type: "POST",
            data: JSON.stringify(formData),
            crossDomain: true,   
            contentType: "application/json",
            beforeSend: (xhr) => {
                xhr.setRequestHeader('Authorization', 'Bearer ' + TOKEN)                
                // xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded')
            },
            success: (response) => {
                console.log(response)
                alert("You should now see the field you just added!")                
            },            
            error: function (req, ajaxOptions, thrownError) {                
                console.log(req.responseText)
                alert("ERROR FOUND")
            }
        })          
    })
</script>
</html>